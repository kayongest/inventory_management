{% extends 'inventory/base.html' %} {% load widget_tweaks %} {% block content %}
<div class="container-fluid">
  <div class="row">
    <div class="col-12">
      <div class="d-flex justify-content-between align-items-center mt-2">
        <h1>Inventory Items</h1>
      </div>

      {% if items %}
      <div class="card">
        <div class="card-body">
          <div class="table-responsive">
            <table class="table table-striped table-hover">
              <thead>
                <tr>
                  <th>Name</th>
                  <th>SKU</th>
                  <th>Category</th>
                  <th>Quantity</th>
                  <th>Price</th>
                  <th>Status</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody>
                {% for item in items %}
                <tr>
                  <td>{{ item.name }}</td>
                  <td><code>{{ item.sku }}</code></td>
                  <td>{{ item.category.name }}</td>
                  <td>
                    <span
                      class="badge bg-{% if item.quantity == 0 %}danger{% elif item.quantity <= item.min_stock_level %}warning{% else %}success{% endif %}"
                    >
                      {{ item.quantity }}
                    </span>
                  </td>
                  <td>${{ item.selling_price }}</td>
                  <td>
                    <span
                      class="badge bg-{% if item.status == 'available' %}success{% elif item.status == 'out_of_stock' %}danger{% else %}secondary{% endif %}"
                    >
                      {{ item.get_status_display }}
                    </span>
                  </td>
                  <td>
                    <a href="#" class="btn btn-sm btn-outline-primary">View</a>
                    <a href="#" class="btn btn-sm btn-outline-secondary"
                      >Edit</a
                    >
                  </td>
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
        </div>
      </div>
      {% else %}
      <div class="card">
        <div class="card-body text-center py-5">
          <h4 class="text-muted">No items found</h4>
          <p class="text-muted">
            Get started by adding your first inventory item.
          </p>
          <button
            type="button"
            class="btn btn-primary"
            data-bs-toggle="modal"
            data-bs-target="#addItemModal"
          >
            Add Your First Item
          </button>
        </div>
      </div>
      {% endif %}
    </div>
  </div>
</div>

<!-- Add Item Modal -->
<div
  class="modal fade"
  id="addItemModal"
  tabindex="-1"
  aria-labelledby="addItemModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header bg-primary text-white">
        <h5 class="modal-title" id="addItemModalLabel">
          Add New Inventory Item
        </h5>
        <button
          type="button"
          class="btn-close btn-close-white"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <form method="post" action="{% url 'item-create' %}">
        <div class="modal-body">
          {% csrf_token %}

          <div class="row">
            <!-- Basic Information -->
            <div class="col-md-6 mb-3">
              <label for="{{ form.name.id_for_label }}" class="form-label"
                >Item Name *</label
              >
              {{ form.name|add_class:"form-control" }}
            </div>

            <div class="col-md-6 mb-3">
              <label for="{{ form.category.id_for_label }}" class="form-label"
                >Category *</label
              >
              {{ form.category|add_class:"form-control" }}
            </div>
          </div>

          <div class="row">
            <div class="col-md-6 mb-3">
              <label for="{{ form.sku.id_for_label }}" class="form-label"
                >SKU *</label
              >
              {{ form.sku|add_class:"form-control" }}
            </div>

            <div class="col-md-6 mb-3">
              <label for="{{ form.barcode.id_for_label }}" class="form-label"
                >Barcode</label
              >
              {{ form.barcode|add_class:"form-control" }}
            </div>
          </div>

          <div class="mb-3">
            <label for="{{ form.description.id_for_label }}" class="form-label"
              >Description</label
            >
            {{ form.description|add_class:"form-control"|attr:"rows:2" }}
          </div>

          <!-- Pricing -->
          <div class="row">
            <div class="col-md-6 mb-3">
              <label for="{{ form.cost_price.id_for_label }}" class="form-label"
                >Cost Price ($)</label
              >
              {{ form.cost_price|add_class:"form-control" }}
            </div>

            <div class="col-md-6 mb-3">
              <label
                for="{{ form.selling_price.id_for_label }}"
                class="form-label"
                >Selling Price ($)</label
              >
              {{ form.selling_price|add_class:"form-control" }}
            </div>
          </div>

          <!-- Inventory -->
          <div class="row">
            <div class="col-md-4 mb-3">
              <label for="{{ form.quantity.id_for_label }}" class="form-label"
                >Quantity</label
              >
              {{ form.quantity|add_class:"form-control" }}
            </div>

            <div class="col-md-4 mb-3">
              <label
                for="{{ form.min_stock_level.id_for_label }}"
                class="form-label"
                >Min Stock</label
              >
              {{ form.min_stock_level|add_class:"form-control" }}
            </div>

            <div class="col-md-4 mb-3">
              <label
                for="{{ form.max_stock_level.id_for_label }}"
                class="form-label"
                >Max Stock</label
              >
              {{ form.max_stock_level|add_class:"form-control" }}
            </div>
          </div>

          <div class="row">
            <div class="col-md-6 mb-3">
              <label for="{{ form.status.id_for_label }}" class="form-label"
                >Status</label
              >
              {{ form.status|add_class:"form-control" }}
            </div>

            <div class="col-md-6 mb-3">
              <label for="{{ form.location.id_for_label }}" class="form-label"
                >Location</label
              >
              {{ form.location|add_class:"form-control" }}
            </div>
          </div>

          <div class="mb-3">
            <label for="{{ form.shelf.id_for_label }}" class="form-label"
              >Shelf/Bin</label
            >
            {{ form.shelf|add_class:"form-control" }}
          </div>

          <div class="mb-3">
            <label for="{{ form.supplier.id_for_label }}" class="form-label"
              >Supplier</label
            >
            {{ form.supplier|add_class:"form-control" }}
          </div>
        </div>
        <div class="modal-footer">
          <button
            type="button"
            class="btn btn-outline-secondary"
            data-bs-dismiss="modal"
          >
            Cancel
          </button>
          <button type="submit" class="btn btn-primary">Add Item</button>
        </div>
      </form>
    </div>
  </div>
</div>
{% endblock content %}
